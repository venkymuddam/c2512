

#include<iostream>
#include<unistd.h>
#include<cstring>
#include<vector>
using namespace std;



void client(int clientEnd) {

    int n;
    cout << "enter the size of the array : ";
    cin >> n;
    int arr[100];
    
    int age = 0;
    for (int i=0; i<n; i++){
        
        cout << "ener the age : " << endl;
        cin >> age;
        arr[i] = age;
        
    }
    write(clientEnd, arr, sizeof(arr));

}

void server(int serverEnd) {

    
    int buffer[1024];
    read(serverEnd, buffer, sizeof(buffer));
    
    int sum = 0;
    for (auto curr : buffer){
        sum += curr;
    }
    cout << "the sum is : " << sum << endl;
}



int main(){
    
    int pipefd[2];
    
    if (pipe(pipefd) == -1){
        perror("error");
        return 1;
    }


	{    
    		pid_t pid;
    		pid = fork();
    
    		if (pid == -1){
        		perror("error");
        		return 1;
    		}
    
    		if (pid ==0){
        		client(pipefd[1]);
			return 0;
    		}
 
	}

	server(pipefd[0]);
    	return 0;
}
